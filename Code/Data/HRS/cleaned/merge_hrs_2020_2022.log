--------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Volumes/SSD PRO/Github-forks/Chp2-BeliefsandTrust/Code/Data/HRS/cleaned/
> merge_hrs_2020_2022.log
  log type:  text
 opened on:  23 Sep 2025, 09:09:44

. 
. set more off

. 
. * --- file paths
. local cleaned "/Volumes/SSD PRO/Github-forks/Chp2-BeliefsandTrust/Code/Data/HRS/clea
> ned"

. local file2020 "/Volumes/SSD PRO/Github-forks/Chp2-BeliefsandTrust/Code/Data/HRS/_ra
> w/2020/h20sta/hrs_2020_selected.dta"

. local file2022 "/Volumes/SSD PRO/Github-forks/Chp2-BeliefsandTrust/Code/Data/HRS/_ra
> w/2022/h22sta/hrs_2022_selected.dta"

. local out "`cleaned'/hrs_2020_2022_master.dta"

. 
. * --- check files exist
. capture confirm file "`file2020'"

. if _rc {
.     di as error "ERROR: 2020 file not found -> `file2020'"
.     exit 198
. }

. capture confirm file "`file2022'"

. if _rc {
.     di as error "ERROR: 2022 file not found -> `file2022'"
.     exit 198
. }

. 
. * ---------------------------------------------------------------------
. * Load 2020 data (master) and merge 2022 data
. * ---------------------------------------------------------------------
. use "`file2020'", clear

. merge 1:1 HHID RSUBHH using "`file2022'"

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,206
        from master                     2,420  (_merge==1)
        from using                      2,786  (_merge==2)

    Matched                             9,070  (_merge==3)
    -----------------------------------------

. 
. * --- inspect merge results
. di as txt "Merge 2020 + 2022 results:"
Merge 2020 + 2022 results:

. tab _merge

   Matching result from |
                  merge |      Freq.     Percent        Cum.
------------------------+-----------------------------------
        Master only (1) |      2,420       16.95       16.95
         Using only (2) |      2,786       19.52       36.47
            Matched (3) |      9,070       63.53      100.00
------------------------+-----------------------------------
                  Total |     14,276      100.00

. 
. * --- optionally keep only matched households
. * keep if _merge==3
. 
. * --- drop _merge after inspection
. drop _merge

. 
. * ---------------------------------------------------------------------
. * Save final master dataset
. * ---------------------------------------------------------------------
. save "`out'", replace
file /Volumes/SSD
    PRO/Github-forks/Chp2-BeliefsandTrust/Code/Data/HRS/cleaned/hrs_2020_2022_master
    > .dta saved

. di as txt "Saved merged 2020+2022 HRS data to `out'"
Saved merged 2020+2022 HRS data to /Volumes/SSD PRO/Github-forks/Chp2-BeliefsandTrust/
> Code/Data/HRS/cleaned/hrs_2020_2022_master.dta

. 
. log close
      name:  <unnamed>
       log:  /Volumes/SSD PRO/Github-forks/Chp2-BeliefsandTrust/Code/Data/HRS/cleaned/
> merge_hrs_2020_2022.log
  log type:  text
 closed on:  23 Sep 2025, 09:09:44
--------------------------------------------------------------------------------------
